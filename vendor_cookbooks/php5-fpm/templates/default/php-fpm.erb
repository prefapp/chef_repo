<% 
#Loop through pool configuration
if node[:platform_version].include?("10.04") && node[:platform].include?("ubuntu")
	fpm_config = JSON.parse(node["php_fpm"]["ubuntu1004_config"])
else
	fpm_config = JSON.parse(node["php_fpm"]["config"])
end
-%>
###################################################################
#																  #
#    CONFIGURATION TEMPLATE GENERATED BY PHP5-FPM CHEF COOKBOOK   #
#																  #
#        _( )__  _( )__  _( )__  _( )__  _( )__  _( )__  _( )__   #
#      _|     _||     _||     _||     _||     _||     _||     _|  #
#     (_ P _ ((_ H _ ((_ P _ ((_ - _ ((_ F _ ((_ P _ ((_ M _ (_   #
#       |_( )__||_( )__||_( )__||_( )__||_( )__||_( )__||_( )__|  #
#																  #
################################################################### 

<% fpm_config["config"].each do |configuration,value| -%>
	<% if value != "NOT_SET" -%>
		<% if configuration.include?("pid") && node[:platform].include?("centos") && node[:platform_version].include?("6.") -%>
<%= "#SETTING CONFIGURATION: #{configuration} ###############" %>
<%= "#{configuration} = #{node["php_fpm"]["centos_pid"]}" %>

		<% else -%>
<%= "#SETTING CONFIGURATION: #{configuration} ###############" %>
<%= "#{configuration} = #{value}" %>

		<% end -%>
	<% end -%>
<% end -%>

#POOL DIRECTORY LOCATION
<%= node["php_fpm"]["pools_include"] %>